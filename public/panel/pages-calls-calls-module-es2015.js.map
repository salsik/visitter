{"version":3,"sources":["./src/app/pages/calls/calls-routing.module.ts","./src/app/pages/calls/calls.component.ts","./src/app/pages/calls/calls.component.html","./src/app/pages/calls/calls.module.ts"],"names":[],"mappings":"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","file":"pages-calls-calls-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport {CallsComponent} from './calls.component';\r\n\r\n\r\nconst routes: Routes = [{\r\n  path: '',\r\n  component: CallsComponent,\r\n  data: {\r\n    title: 'Calls'\r\n  }\r\n}];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class CallsRoutingModule { }\r\n","import {Component, Injector, OnInit, ViewEncapsulation} from '@angular/core';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport {BaseComponent} from '../../../@calls/components/base/base.component';\r\n\r\n@Component({\r\n    selector: 'app-calls',\r\n    templateUrl: './calls.component.html',\r\n    styleUrls: ['./calls.component.scss']\r\n})\r\nexport class CallsComponent extends BaseComponent implements OnInit {\r\n    dataSource: any;\r\n    isLoading = false;\r\n    page = 0;\r\n    itemsCount = 10;\r\n    selected: any;\r\n    rate: any = [];\r\n    companies: any = [];\r\n    selectedId = this.authService.currentUser?.company_id;\r\n\r\n    constructor(injector: Injector) {\r\n        super(injector);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // this.getCalls();\r\n        if (this.authService.currentUser.type === 'super_admin') {\r\n            this.getCompanies();\r\n        } else {\r\n            this.getCalls();\r\n        }\r\n    }\r\n\r\n    async deleteItem(item, ev) {\r\n        ev.event.stopPropagation();\r\n        const result = await this.utilService.confirmationDialog(this.translateService.instant('app.warning'),\r\n            this.translateService.instant('app.removeCaution'));\r\n        result.subscribe((res) => {\r\n            if (res) {\r\n                this.isLoading = true;\r\n                this.callsService.removeCall(item.id).subscribe((res) => {\r\n                    this.getCalls();\r\n                    this.isLoading = false;\r\n                }, (err) => {\r\n                    console.log(err);\r\n                    this.isLoading = false;\r\n                    this.utilService.showConnectionErrorToast();\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    getCalls(): void {\r\n        this.dataSource = new DataSource({\r\n            key: 'id',\r\n            load: (loadOptions) => this.callsService.getCalls(this.page, this.itemsCount, this.selectedId).toPromise()\r\n                .then(result => {\r\n                    this.isLoading = false;\r\n                    return {\r\n                        data: result.content.data.data,\r\n                        totalCount: result.content.data.total,\r\n                        groupCount: result.content.data.per_page\r\n                    };\r\n                })\r\n        });\r\n    }\r\n\r\n    viewDetails(item) {\r\n        this.selected = item.data;\r\n        this.rate = Array.from({length: +this.selected.rate}, (v, k) => k);\r\n        document.getElementById('showModal').click();\r\n    }\r\n\r\n    getDate(date): string {\r\n        const d = new Date(date);\r\n        return d.toISOString().substring(0, 10);\r\n    }\r\n\r\n    getTime(date): string {\r\n        const d = new Date(date);\r\n        const p = d.toISOString().split('T');\r\n        const three = p[1].substring(0, 5);\r\n        return three.toString();\r\n    }\r\n\r\n    getCompanies(): void {\r\n        this.isLoading = true;\r\n        this.callsService.getCompanies().subscribe((res) => {\r\n            this.companies = res.content.data;\r\n            this.selectedId = this.companies[0].id;\r\n            this.getCalls();\r\n        }, (err) => {\r\n            console.log(err);\r\n        });\r\n    }\r\n\r\n    setSelectedCompany(id: number): void {\r\n        this.selectedId = id;\r\n        this.page = 0;\r\n        this.itemsCount = 10;\r\n        this.getCalls();\r\n    }\r\n}\r\n","<div class=\"no-scroll\">\r\n    <div class=\"row\">\r\n        <div class=\"col-md-2 col-sm-12 company-list\" *ngIf=\"authService.currentUser.type === 'super_admin'\">\r\n            <h2>{{'calls.companies'  | translate}}</h2>\r\n            <div *ngFor=\"let item of companies\" [ngClass]=\"selectedId === item.id && 'active'\" class=\"company-item\"\r\n                 (click)=\"setSelectedCompany(item.id)\">\r\n                <p>{{item.companyName}}</p>\r\n            </div>\r\n        </div>\r\n        <div [ngClass]=\"authService.currentUser.type === 'super_admin' ? 'col-md-10' : 'col-md-12'\" class=\" col-sm-12\">\r\n            <dx-data-grid class=\"datagrid\" [dataSource]=\"dataSource\"\r\n                          [showBorders]=\"true\"\r\n                          [hoverStateEnabled]=\"true\"\r\n                          (onRowClick)=\"viewDetails($event)\" [noDataText]=\"'menu.noData' | translate\"\r\n                          [showRowLines]=\"true\">\r\n                <dxo-load-panel [text]=\"'menu.loading' | translate\"\r\n                                [enabled]=\"true\">\r\n                </dxo-load-panel>\r\n                <dxo-remote-operations\r\n                        [groupPaging]=\"true\">\r\n                </dxo-remote-operations>\r\n                <dxo-paging [(pageIndex)]=\"page\" [(pageSize)]=\"itemsCount\"></dxo-paging>\r\n                <dxo-pager\r\n                        [showPageSizeSelector]=\"true\"\r\n                        [allowedPageSizes]=\"[5, 10]\"\r\n                ></dxo-pager>\r\n                <dxo-sorting mode=\"multiple\"></dxo-sorting>\r\n                <dxo-filter-row></dxo-filter-row>\r\n                <dxo-header-filter></dxo-header-filter>\r\n                <dxi-column dataField=\"department.label\" [caption]=\"'calls.department' | translate\" alignment=\"center\"\r\n                            [allowSorting]=\"true\"></dxi-column>\r\n                <dxi-column dataField=\"date\" cellTemplate=\"dateTemplate\" [caption]=\"'calls.date' | translate\"\r\n                            alignment=\"center\"\r\n                            [allowSorting]=\"true\"></dxi-column>\r\n                <dxi-column [width]=\"150\" dataField=\"actions\" caption=\"Actions\" alignment=\"center\"\r\n                            cellTemplate=\"actionTemplate\"\r\n                            [allowSorting]=\"true\"></dxi-column>\r\n                <div *dxTemplate=\"let r of 'actionTemplate'\">\r\n                    <dx-button class=\"remove-btn\" icon=\"trash\" (onClick)=\"deleteItem(r.data, $event)\">\r\n                    </dx-button>\r\n                </div>\r\n                <div *dxTemplate=\"let r of 'dateTemplate'\">\r\n                    <p>{{getDate(r.data?.created_at)}} / {{getTime(r.data?.created_at)}}</p>\r\n                </div>\r\n            </dx-data-grid>\r\n        </div>\r\n    </div>\r\n    <app-loader *ngIf=\"isLoading\"></app-loader>\r\n    <button style=\"visibility: hidden\" id=\"showModal\" data-toggle=\"modal\" data-target=\"#default-modal\"></button>\r\n    <div class=\"modal fade\" id=\"default-modal\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h4>Call Details</h4><span>\r\n            </span>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <!--                <h4>Note</h4>\r\n                                    <p>{{selected?.note}}</p>-->\r\n                    <h4>Department</h4>\r\n                    <p>{{selected?.department?.label}}</p>\r\n                    <h4>Date / Time</h4>\r\n                    <p>{{getDate(selected?.created_at)}} / {{getTime(selected?.created_at)}}</p>\r\n                    <h4>Selfie</h4>\r\n                    <img style=\"    width: 65%;\r\n    height: 277px;\r\n    object-fit: contain;\" [src]=\"selected?.image\"/>\r\n                </div>\r\n                <div class=\"modal-footer no-border\">\r\n                    <div class=\"text-right\">\r\n                        <button class=\"btn btn-primary btn-md\" data-dismiss=\"modal\">OK</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { CallsRoutingModule } from './calls-routing.module';\r\nimport {CallsComponent} from './calls.component';\r\nimport {SharedModule} from '../../shared/shared.module';\r\n\r\n\r\n@NgModule({\r\n  declarations: [CallsComponent],\r\n  imports: [\r\n    CommonModule,\r\n    CallsRoutingModule,\r\n    SharedModule\r\n  ]\r\n})\r\nexport class CallsModule { }\r\n"],"sourceRoot":"webpack:///"}