{"version":3,"sources":["webpack:///src/app/pages/calls/calls-routing.module.ts","webpack:///src/app/pages/calls/calls.component.ts","webpack:///src/app/pages/calls/calls.component.html","webpack:///src/app/pages/calls/calls.module.ts"],"names":["routes","path","component","data","title","CallsRoutingModule","forChild","imports","exports","CallsComponent","injector","isLoading","page","itemsCount","rate","getCalls","item","console","log","callsService","removeCall","id","subscribe","res","err","utilService","showConnectionErrorToast","dataSource","key","load","loadOptions","toPromise","then","result","content","totalCount","total","groupCount","per_page","selected","Array","from","length","v","k","document","getElementById","click","date","d","Date","toISOString","substring","p","split","three","toString","viewDetails","selector","templateUrl","styleUrls","CallsModule","declarations"],"mappings":"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","file":"pages-calls-calls-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport {CallsComponent} from './calls.component';\n\n\nconst routes: Routes = [{\n  path: '',\n  component: CallsComponent,\n  data: {\n    title: 'Calls'\n  }\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class CallsRoutingModule { }\n","import {Component, Injector, OnInit} from '@angular/core';\nimport DataSource from 'devextreme/data/data_source';\nimport {BaseComponent} from '../../../@calls/components/base/base.component';\n\n@Component({\n    selector: 'app-calls',\n    templateUrl: './calls.component.html',\n    styleUrls: ['./calls.component.scss']\n})\nexport class CallsComponent extends BaseComponent implements OnInit {\n    dataSource: any;\n    isLoading = false;\n    page = 0;\n    itemsCount = 10;\n    selected: any;\n    rate: any = [];\n\n    constructor(injector: Injector) {\n        super(injector);\n    }\n\n    ngOnInit(): void {\n        this.getCalls();\n    }\n\n    deleteItem(item): void {\n        console.log(item);\n        this.isLoading = true;\n        this.callsService.removeCall(item.id).subscribe((res) => {\n            console.log(res);\n            this.getCalls();\n            this.isLoading = false;\n        }, (err) => {\n            console.log(err);\n            this.isLoading = false;\n            this.utilService.showConnectionErrorToast();\n        });\n    }\n\n\n    getCalls(): void {\n        this.dataSource = new DataSource({\n            key: 'id',\n            load: (loadOptions) => this.callsService.getCalls(this.page, this.itemsCount).toPromise()\n                .then(result => {\n                    return {\n                        data: result.content.data.data,\n                        totalCount: result.content.data.total,\n                        groupCount: result.content.data.per_page\n                    };\n                })\n        });\n    }\n\n    viewDetails(item) {\n        console.log(item.data);\n        this.selected = item.data;\n        this.rate = Array.from({length: +this.selected.rate}, (v, k) => k);\n        document.getElementById('showModal').click();\n    }\n\n    getDate(date): string {\n        const d = new Date(date);\n        return d.toISOString().substring(0, 10);\n    }\n\n    getTime(date): string {\n        const d = new Date(date);\n        const p = d.toISOString().split('T');\n        const three = p[1].substring(0, 5);\n        return three.toString();\n    }\n}\n","<div class=\"row header-row\">\n    <div class=\"col-9 row\"></div>\n    <div class=\"col-3 float-end\">\n        <!--        <dx-button\n                        [routerLink]=\"'/pages/location/add'\"\n                        class=\"add-btn\"\n                        icon=\"add\"\n                        stylingMode=\"text\"\n                        text=\" Add New Location\"\n                        type=\"normal\">\n                </dx-button>-->\n    </div>\n</div>\n<dx-data-grid class=\"datagrid\" [dataSource]=\"dataSource\"\n              [showBorders]=\"true\"\n              [hoverStateEnabled]=\"true\"\n              (onRowClick)=\"viewDetails($event)\"\n              [showRowLines]=\"true\">\n    <dxo-remote-operations\n            [groupPaging]=\"true\">\n    </dxo-remote-operations>\n    <dxo-paging [(pageIndex)]=\"page\" [(pageSize)]=\"itemsCount\"></dxo-paging>\n    <dxo-pager\n            [showPageSizeSelector]=\"true\"\n            [allowedPageSizes]=\"[5, 10, 25, 50, 100]\"\n    ></dxo-pager>\n    <dxo-sorting mode=\"multiple\"></dxo-sorting>\n    <dxo-filter-row></dxo-filter-row>\n    <dxo-header-filter></dxo-header-filter>\n    <dxi-column dataField=\"note\" caption=\"Name\" alignment=\"center\"\n                [allowSorting]=\"true\"></dxi-column>\n    <dxi-column *ngIf=\"authService.currentUser?.type === 'super_admin'\" dataField=\"company.companyName\"\n                caption=\"Company Name\"\n                alignment=\"center\"\n                [allowSorting]=\"true\"></dxi-column>\n    <dxi-column dataField=\"department.label\" caption=\"Department\" alignment=\"center\"\n                [allowSorting]=\"true\"></dxi-column>\n    <dxi-column [width]=\"150\" dataField=\"actions\" caption=\"Actions\" alignment=\"center\" cellTemplate=\"actionTemplate\"\n                [allowSorting]=\"true\"></dxi-column>\n    <div *dxTemplate=\"let r of 'actionTemplate'\">\n        <dx-button class=\"remove-btn\" icon=\"minus\" (onClick)=\"deleteItem(r.data)\">\n        </dx-button>\n    </div>\n</dx-data-grid>\n<app-loader *ngIf=\"isLoading\"></app-loader>\n<button style=\"visibility: hidden\" id=\"showModal\" data-toggle=\"modal\" data-target=\"#default-modal\"></button>\n<div class=\"modal fade\" id=\"default-modal\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h4>Call Details</h4><span>\n            </span>\n            </div>\n            <div class=\"modal-body\">\n                <!--                <h4>Note</h4>\n                                <p>{{selected?.note}}</p>-->\n                <h4>Department</h4>\n                <p>{{selected?.department?.label}}</p>\n                <ng-container *ngIf=\"authService.currentUser?.type === 'super_admin'\">\n                    <h4>Company</h4>\n                    <p>{{selected?.company?.companyName}}</p>\n                </ng-container>\n                <h4>Date / Time</h4>\n                <p>{{getDate(selected?.created_at)}} / {{getTime(selected?.created_at)}}</p>\n                <h4>Selfie</h4>\n                <img style=\"    width: 65%;\n    height: 277px;\n    object-fit: contain;\" [src]=\"selected?.image\"/>\n            </div>\n            <div class=\"modal-footer no-border\">\n                <div class=\"text-right\">\n                    <button class=\"btn btn-primary btn-md\" data-dismiss=\"modal\">OK</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { CallsRoutingModule } from './calls-routing.module';\nimport {CallsComponent} from './calls.component';\nimport {SharedModule} from '../../shared/shared.module';\n\n\n@NgModule({\n  declarations: [CallsComponent],\n  imports: [\n    CommonModule,\n    CallsRoutingModule,\n    SharedModule\n  ]\n})\nexport class CallsModule { }\n"]}